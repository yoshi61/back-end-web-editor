$(document).on('click', '.browse', function(){
    var file = $(this).parent().parent().parent().find('.file');
    file.trigger('click');
});

$(document).on('change', '.file', function(){
    $(this).parent().find('.form-control').val($(this).val().replace(/C:\\fakepath\\/i, ''));
});

// unblock when ajax activity stops
$(document).ajaxStop($.unblockUI);

// Required when making POST requests through AJAX
$.ajaxSetup({
    headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
});

// if load data button has been click
// trigger process
$(".load_excel_sheet").on('click', function()
{
    // Show wait message while seeding data
    $.blockUI({ message: '<h3><img src="/images/ipq-busy.gif" /> Please wait..! Seeding database with data.</h3>' });

    // Send command to seed database from excel file and load sheet data
    $.ajax({
        type: "POST",
        url: "/load/excel_sheet",
        data: { file_details: $(this).attr('id') },
        success: function (message) {
            $.unblockUI();
            alert( message );
        }
    });
});

// if load wdt data button has been click
// trigger process
$(".load_wdt_excel_sheet").on('click', function()
{
    // Show wait message while seeding data
    $.blockUI({ message: '<h3><img src="/images/ipq-busy.gif" /> Please wait..! Seeding database with data.</h3>' });

    // Send command to seed database from excel file and load sheet data
    $.ajax({
        type: "POST",
        url: "/wdt/load/excel_sheet",
        data: { file_details: $(this).attr('id') },
        success: function (message) {
            $.unblockUI();
            alert( message );
        }
    });
});